{{define "title"}}{{.Post.Slug}}{{ end }}
{{define "page-content"}}
<section>
  {{.Post.Content}}
</section>

<section>
  <div>
    <h4>Comments</h4>
    <p id="add-comment-btn">add a comment</p>
  </div>

  <form action="/comment/create" method="POST" id="add-comment-form" class="{{if not .Form.FieldErrors}}hidden{{end}}">
    <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
    <input type="hidden" name="post_slug" value="{{.Post.Slug}}">
    <div>
      <label>Name</label>
      {{with .Form.FieldErrors.name}}
      <label>{{.}}</label>
      {{end}}
      <input type="text" name="name" value="{{.Form.Name}}">
    </div>
    <div>
      <label>Website/Social Media (optional)</label>
      {{with .Form.FieldErrors.website}}
      <label>{{.}}</label>
      {{end}}
      <input type="url" name="website" value="{{.Form.Website}}">
    </div>
    <div>
      <label>Comment</label>
      {{with .Form.FieldErrors.comment}}
      <label>{{.}}</label>
      {{end}}
      <textarea name="comment">{{.Form.Comment}}</textarea>
    </div>
    <div>
      <input type='submit' value='submit'>
    </div>
    <div>
      <p id="cancel-comment-btn">cancel</p>
    </div>
  </form>

  <div>
    {{if .Comments}}
    {{range .Comments}}
    <div id="comment-{{.ID}}">
      <div>
        <div>
          <h4>{{.Name}}</h4>
          {{if .Website}}
          <a href="{{.Website}}" target="_blank" rel="noopener noreferrer">{{.Website}}</a>
          {{end}}
        </div>
        <time datetime="{{.Created.Format " 2006-01-02T15:04:05Z07:00"}}">
          {{.Created.Format "01/02/2006 3:04 PM"}}
        </time>
      </div>
      <p>{{.Content}}</p>
    </div>
    {{end}}
    {{else}}
    <div>No comments yet!</div>
    {{end}}
  </div>
</section>
<script src="../../static/js/comments.js" type="text/javascript"></script>
{{ end }}